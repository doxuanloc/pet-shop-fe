{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/namduong/Documents/dev/petshop-project/frontend/src/components/Shop/ProductReview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport '../../Styles/Home.css';\nimport '../../App.css';\nimport ReactStars from \"react-rating-stars-component\";\nimport { UserContext } from '../../contexts/User';\nimport axios from 'axios';\nexport default function ProductReview(props) {\n  _s();\n\n  const [reviewStar, setReviewStar] = useState(0);\n  const [reviewName, setReviewName] = useState(\"\");\n  const [reviewContent, setReviewContent] = useState(\"\");\n  const [productVote, setProductVote] = useState([]);\n  const [product, setProduct] = useState(null);\n  const [limitReview, setLimitReview] = useState(3);\n  const {\n    userInfo\n  } = useContext(UserContext);\n  useEffect(() => {\n    if (userInfo) {\n      setReviewName(userInfo.userEmail);\n    }\n\n    if (props.product) {\n      setProduct(props.product);\n      const arr = props.product.productVote.sort((a, b) => new Date(b.ratingDate) - new Date(a.ratingDate));\n      setProductVote(arr);\n    }\n  }, [userInfo]);\n  console.log(productVote);\n  const reviewStarConfig = {\n    size: 24,\n    value: reviewStar,\n    activeColor: \"#fc2754\",\n    color: \"#ddd\",\n    isHalf: true,\n    edit: true,\n    onChange: newValue => {\n      setReviewStar(newValue);\n    }\n  };\n\n  const sendReview = event => {\n    event.preventDefault();\n\n    if (userInfo) {\n      const data = {\n        ratingName: reviewName,\n        ratingDate: new Date().toString(),\n        ratingContent: reviewContent,\n        ratingStart: reviewStar,\n        ratingAvt: userInfo.userAvt\n      };\n      axios.post(`http://localhost:4000/products/review/${product._id}`, data).then(res => {\n        console.log(res);\n        setProductVote(productVote => [data, ...productVote]);\n        setReviewName(\"\");\n        setReviewContent(\"\");\n      });\n    } else {\n      const data = {\n        ratingName: reviewName,\n        ratingDate: new Date().toString(),\n        ratingContent: reviewContent,\n        ratingStart: reviewStar,\n        ratingAvt: \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"\n      };\n      axios.post(`http://localhost:4000/products/review/${product._id}`, data).then(res => {\n        setProductVote(productVote => [data, ...productVote]);\n        setReviewName(\"\");\n        setReviewContent(\"\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ProductReview\",\n    id: \"review\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"invitejoin\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"invitejoin-title\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u0110\\xE1nh gi\\xE1 c\\u1EE7a ng\\u01B0\\u1EDDi d\\xF9ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productreview-list flex-col\",\n        children: productVote && productVote.slice(0, limitReview).map((item, index) => {\n          const ratingStar = {\n            size: 14,\n            value: item.ratingStart,\n            edit: false,\n            activeColor: \"#fc2754\",\n            color: \"#ddd\",\n            isHalf: true\n          };\n          const date = new Date(item.ratingDate);\n          const day = date.getDate();\n          const month = date.getMonth() + 1;\n          const year = date.getFullYear();\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productreview-item flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"productreview-avt\",\n              src: item.ratingAvt || \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"productreview-body flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"productreview-first flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"productreview-name\",\n                  children: item.ratingName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"productreview-time\",\n                  children: `${day}/${month}/${year}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"productreview-second\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"productreview-star\",\n                  children: /*#__PURE__*/_jsxDEV(ReactStars, { ...ratingStar\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"productreview-content\",\n                  children: item.ratingContent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), productVote.length > 3 && productVote.length !== productVote.slice(0, limitReview).length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setLimitReview(limitReview => limitReview + 3);\n          },\n          className: \"productreview-loadmore-btn\",\n          children: \"load more...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productreview-post flex-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productreview-post-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"C\\u1EA3m ngh\\u0129 c\\u1EE7a b\\u1EA1n v\\u1EC1 s\\u1EA3n ph\\u1EA9m:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ReactStars, { ...reviewStarConfig\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"flex-col\",\n            onSubmit: sendReview,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"T\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: reviewName,\n              onChange: event => {\n                setReviewName(event.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"N\\u1ED9i dung\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: reviewContent,\n              onChange: event => {\n                setReviewContent(event.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"X\\xE1c nh\\u1EADn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductReview, \"B0h8BlSGiFs92fD+Ly++iiSkULo=\");\n\n_c = ProductReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductReview\");","map":{"version":3,"sources":["/Users/namduong/Documents/dev/petshop-project/frontend/src/components/Shop/ProductReview.js"],"names":["React","useContext","useEffect","useState","ReactStars","UserContext","axios","ProductReview","props","reviewStar","setReviewStar","reviewName","setReviewName","reviewContent","setReviewContent","productVote","setProductVote","product","setProduct","limitReview","setLimitReview","userInfo","userEmail","arr","sort","a","b","Date","ratingDate","console","log","reviewStarConfig","size","value","activeColor","color","isHalf","edit","onChange","newValue","sendReview","event","preventDefault","data","ratingName","toString","ratingContent","ratingStart","ratingAvt","userAvt","post","_id","then","res","slice","map","item","index","ratingStar","date","day","getDate","month","getMonth","year","getFullYear","length","target"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport '../../Styles/Home.css'\nimport '../../App.css' \nimport ReactStars from \"react-rating-stars-component\";\nimport { UserContext } from '../../contexts/User';\nimport axios from 'axios'\n\nexport default function ProductReview(props) { \n\n    const [reviewStar, setReviewStar] = useState(0)\n    const [reviewName, setReviewName] = useState(\"\")\n    const [reviewContent, setReviewContent] = useState(\"\")\n    const [productVote, setProductVote] = useState([])\n    const [product, setProduct] = useState(null)\n    const [limitReview, setLimitReview] = useState(3)\n    const { \n        userInfo\n    } = useContext(UserContext);\n\n    useEffect(()=>{\n        if (userInfo) {\n            setReviewName(userInfo.userEmail)\n        }\n        if (props.product) { \n            setProduct(props.product)\n            const arr = props.product.productVote.sort((a,b)=> new Date(b.ratingDate) - new Date(a.ratingDate));\n            setProductVote(arr);  \n        }\n    },[userInfo]) \n\n    console.log(productVote)\n\n    const reviewStarConfig = {\n        size: 24,\n        value: reviewStar,\n        activeColor: \"#fc2754\",\n        color: \"#ddd\",\n        isHalf: true,\n        edit: true,\n        onChange: newValue => {\n            setReviewStar(newValue)\n        }\n    }\n\n    const sendReview = (event) => {\n        event.preventDefault() \n        if (userInfo) {\n            const data = {\n                ratingName: reviewName,\n                ratingDate: new Date().toString(),\n                ratingContent: reviewContent, \n                ratingStart: reviewStar,\n                ratingAvt: userInfo.userAvt\n            }\n            axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n            .then((res)=>{\n                console.log(res)\n                setProductVote(productVote=>[data, ...productVote])\n                setReviewName(\"\")\n                setReviewContent(\"\") \n            })\n        } else {\n            const data = {\n                ratingName: reviewName,\n                ratingDate: new Date().toString(),\n                ratingContent: reviewContent, \n                ratingStart: reviewStar, \n                ratingAvt: \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"\n            }\n            axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n            .then((res)=>{ \n                setProductVote(productVote=>[data, ...productVote])\n                setReviewName(\"\")\n                setReviewContent(\"\") \n            })\n        }\n    }  \n\n    return (\n        <div className=\"ProductReview\" id=\"review\">\n            <div className=\"invitejoin\">\n                <div className=\"invitejoin-title\">\n                    <strong>Đánh giá của người dùng</strong>\n                </div>\n                <div className=\"productreview-list flex-col\">\n                    {\n                        productVote && \n                        productVote.slice(0,limitReview).map((item, index) => {  \n                            const ratingStar = {\n                                size: 14,\n                                value: item.ratingStart,\n                                edit: false,\n                                activeColor: \"#fc2754\",\n                                color: \"#ddd\",\n                                isHalf: true\n                            }\n                            const date = new Date(item.ratingDate)\n                            const day = date.getDate()\n                            const month = date.getMonth() + 1\n                            const year = date.getFullYear()\n                            return (\n                                <div \n                                    key={index}\n                                    className=\"productreview-item flex\"\n                                > \n                                    <img className=\"productreview-avt\" src={item.ratingAvt || \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"} alt=\"\"></img>\n                                    <div className=\"productreview-body flex-col\">\n                                        <div className=\"productreview-first flex\">\n                                            <div className=\"productreview-name\">\n                                                {item.ratingName}\n                                            </div>\n                                            <div className=\"productreview-time\">\n                                                {`${day}/${month}/${year}`}\n                                            </div>\n                                        </div>\n                                        <div className=\"productreview-second\">\n                                            <div className=\"productreview-star\">\n                                                <ReactStars {...ratingStar} />\n                                            </div>\n                                            <div className=\"productreview-content\">\n                                                {item.ratingContent}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n                {\n                    productVote.length > 3 && productVote.length !== productVote.slice(0,limitReview).length &&\n                    <div className=\"flex-center\">\n                        <div \n                            onClick={()=>{\n                                setLimitReview(limitReview=>limitReview+3)\n                            }}\n                            className=\"productreview-loadmore-btn\"\n                        >load more...</div>\n                    </div>\n                }\n                <div className=\"productreview-post flex-center\">\n                    <div className=\"productreview-post-box\">\n                        <h3>Cảm nghĩ của bạn về sản phẩm:</h3>\n                        <ReactStars {...reviewStarConfig}/>\n                        <form className=\"flex-col\" onSubmit={sendReview}>\n                            <label>Tên</label>\n                            <input \n                                value={reviewName}\n                                onChange={(event)=>{\n                                    setReviewName(event.target.value)\n                                }}\n                            ></input>\n                            <label>Nội dung</label>\n                            <input \n                                value={reviewContent}\n                                onChange={(event)=>{\n                                    setReviewContent(event.target.value)\n                                }}\n                            ></input>\n                            <button>Xác nhận</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}