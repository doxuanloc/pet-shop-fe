{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/namduong/Documents/dev/petshop-project/frontend/src/components/Shop/ProductReview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport '../../Styles/Home.css';\nimport '../../App.css';\nimport ReactStars from \"react-rating-stars-component\";\nimport { UserContext } from '../../contexts/User';\nimport axios from 'axios';\nexport default function ProductReview(props) {\n  _s();\n\n  const [reviewStar, setReviewStar] = useState(0);\n  const [reviewName, setReviewName] = useState(\"\");\n  const [reviewContent, setReviewContent] = useState(\"\");\n  const [productVote, setProductVote] = useState([]);\n  const [product, setProduct] = useState(null);\n  const [limitReview, setLimitReview] = useState(3);\n  const {\n    userInfo\n  } = useContext(UserContext);\n  useEffect(() => {\n    if (userInfo) {\n      setReviewName(userInfo.userEmail);\n    }\n\n    if (props.product) {\n      setProduct(props.product);\n      const productVote = props.product.productVote.reverse();\n      console.log(productVote); // setProductVote(props.product.productVote.reverse()); \n    }\n  }, [userInfo, props.productVote]); // console.log(productVote)\n  // const reviewStarConfig = {\n  //     size: 24,\n  //     value: reviewStar,\n  //     activeColor: \"#fc2754\",\n  //     color: \"#ddd\",\n  //     isHalf: true,\n  //     edit: true,\n  //     onChange: newValue => {\n  //         setReviewStar(newValue)\n  //     }\n  // }\n  // const sendReview = (event) => {\n  //     event.preventDefault() \n  //     if (userInfo) {\n  //         const data = {\n  //             ratingName: reviewName,\n  //             ratingDate: new Date().toString(),\n  //             ratingContent: reviewContent, \n  //             ratingStart: reviewStar,\n  //             ratingAvt: userInfo.userAvt\n  //         }\n  //         axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n  //         setProductVote(productVote=>[...productVote, data])\n  //         setReviewName(\"\")\n  //         setReviewContent(\"\") \n  //     } else {\n  //         const data = {\n  //             ratingName: reviewName,\n  //             ratingDate: new Date().toString(),\n  //             ratingContent: reviewContent, \n  //             ratingStart: reviewStar, \n  //             ratingAvt: \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"\n  //         }\n  //         axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n  //         setProductVote(productVote=>[...productVote, data])\n  //         setReviewName(\"\")\n  //         setReviewContent(\"\") \n  //     }\n  // }  \n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ProductReview\",\n    id: \"review\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductReview, \"B0h8BlSGiFs92fD+Ly++iiSkULo=\");\n\n_c = ProductReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductReview\");","map":{"version":3,"sources":["/Users/namduong/Documents/dev/petshop-project/frontend/src/components/Shop/ProductReview.js"],"names":["React","useContext","useEffect","useState","ReactStars","UserContext","axios","ProductReview","props","reviewStar","setReviewStar","reviewName","setReviewName","reviewContent","setReviewContent","productVote","setProductVote","product","setProduct","limitReview","setLimitReview","userInfo","userEmail","reverse","console","log"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAO,uBAAP;AACA,OAAO,eAAP;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAEzC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACU,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACY,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM;AACFkB,IAAAA;AADE,MAEFpB,UAAU,CAACI,WAAD,CAFd;AAIAH,EAAAA,SAAS,CAAC,MAAI;AACV,QAAImB,QAAJ,EAAc;AACVT,MAAAA,aAAa,CAACS,QAAQ,CAACC,SAAV,CAAb;AACH;;AACD,QAAId,KAAK,CAACS,OAAV,EAAmB;AACfC,MAAAA,UAAU,CAACV,KAAK,CAACS,OAAP,CAAV;AACA,YAAMF,WAAW,GAAGP,KAAK,CAACS,OAAN,CAAcF,WAAd,CAA0BQ,OAA1B,EAApB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYV,WAAZ,EAHe,CAIf;AACH;AACJ,GAVQ,EAUP,CAACM,QAAD,EAAWb,KAAK,CAACO,WAAjB,CAVO,CAAT,CAZyC,CAwBzC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAA+B,IAAA,EAAE,EAAC;AAAlC;AAAA;AAAA;AAAA;AAAA,UADJ;AAyFH;;GA5JuBR,a;;KAAAA,a","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport '../../Styles/Home.css'\nimport '../../App.css' \nimport ReactStars from \"react-rating-stars-component\";\nimport { UserContext } from '../../contexts/User';\nimport axios from 'axios'\n\nexport default function ProductReview(props) { \n\n    const [reviewStar, setReviewStar] = useState(0)\n    const [reviewName, setReviewName] = useState(\"\")\n    const [reviewContent, setReviewContent] = useState(\"\")\n    const [productVote, setProductVote] = useState([])\n    const [product, setProduct] = useState(null)\n    const [limitReview, setLimitReview] = useState(3)\n    const { \n        userInfo\n    } = useContext(UserContext);\n\n    useEffect(()=>{\n        if (userInfo) {\n            setReviewName(userInfo.userEmail)\n        }\n        if (props.product) { \n            setProduct(props.product)\n            const productVote = props.product.productVote.reverse()\n            console.log(productVote)\n            // setProductVote(props.product.productVote.reverse()); \n        }\n    },[userInfo, props.productVote])\n\n    // console.log(productVote)\n\n    // const reviewStarConfig = {\n    //     size: 24,\n    //     value: reviewStar,\n    //     activeColor: \"#fc2754\",\n    //     color: \"#ddd\",\n    //     isHalf: true,\n    //     edit: true,\n    //     onChange: newValue => {\n    //         setReviewStar(newValue)\n    //     }\n    // }\n\n    // const sendReview = (event) => {\n    //     event.preventDefault() \n    //     if (userInfo) {\n    //         const data = {\n    //             ratingName: reviewName,\n    //             ratingDate: new Date().toString(),\n    //             ratingContent: reviewContent, \n    //             ratingStart: reviewStar,\n    //             ratingAvt: userInfo.userAvt\n    //         }\n    //         axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n    //         setProductVote(productVote=>[...productVote, data])\n    //         setReviewName(\"\")\n    //         setReviewContent(\"\") \n    //     } else {\n    //         const data = {\n    //             ratingName: reviewName,\n    //             ratingDate: new Date().toString(),\n    //             ratingContent: reviewContent, \n    //             ratingStart: reviewStar, \n    //             ratingAvt: \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"\n    //         }\n    //         axios.post(`http://localhost:4000/products/review/${product._id}`, data)\n    //         setProductVote(productVote=>[...productVote, data])\n    //         setReviewName(\"\")\n    //         setReviewContent(\"\") \n    //     }\n    // }  \n\n    return (\n        <div className=\"ProductReview\" id=\"review\">\n            {/* <div className=\"invitejoin\">\n                <div className=\"invitejoin-title\">\n                    <strong>Đánh giá của người dùng</strong>\n                </div>\n                <div className=\"productreview-list flex-col\">\n                    {\n                        productVote && \n                        // productVote.reverse().slice(0,limitReview).map((item, index) => { \n                        productVote.reverse().map((item, index) => { \n                            const ratingStar = {\n                                size: 14,\n                                value: item.ratingStart,\n                                edit: false,\n                                activeColor: \"#fc2754\",\n                                color: \"#ddd\",\n                                isHalf: true\n                            }\n                            const date = new Date(item.ratingDate)\n                            const day = date.getDate()\n                            const month = date.getMonth() + 1\n                            const year = date.getFullYear()\n                            return (\n                                <div \n                                    key={index}\n                                    className=\"productreview-item flex\"\n                                > \n                                    <img className=\"productreview-avt\" src={item.ratingAvt || \"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-8.jpg\"} alt=\"\"></img>\n                                    <div className=\"productreview-body flex-col\">\n                                        <div className=\"productreview-first flex\">\n                                            <div className=\"productreview-name\">\n                                                {item.ratingName}\n                                            </div>\n                                            <div className=\"productreview-time\">\n                                                {`${day}/${month}/${year}`}\n                                            </div>\n                                        </div>\n                                        <div className=\"productreview-second\">\n                                            <div className=\"productreview-star\">\n                                                <ReactStars {...ratingStar} />\n                                            </div>\n                                            <div className=\"productreview-content\">\n                                                {item.ratingContent}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n                {\n                    productVote.length > 3 && productVote.length !== productVote.slice(0,limitReview).length &&\n                    <div className=\"flex-center\">\n                        <div \n                            onClick={()=>{\n                                setLimitReview(limitReview=>limitReview+3)\n                            }}\n                            className=\"productreview-loadmore-btn\"\n                        >load more...</div>\n                    </div>\n                }\n                <div className=\"productreview-post flex-center\">\n                    <div className=\"productreview-post-box\">\n                        <h3>Cảm nghĩ của bạn về sản phẩm:</h3>\n                        <ReactStars {...reviewStarConfig}/>\n                        <form className=\"flex-col\" onSubmit={sendReview}>\n                            <label>Tên</label>\n                            <input \n                                value={reviewName}\n                                onChange={(event)=>{\n                                    setReviewName(event.target.value)\n                                }}\n                            ></input>\n                            <label>Nội dung</label>\n                            <input \n                                value={reviewContent}\n                                onChange={(event)=>{\n                                    setReviewContent(event.target.value)\n                                }}\n                            ></input>\n                            <button>Xác nhận</button>\n                        </form>\n                    </div>\n                </div>\n            </div> */}\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}